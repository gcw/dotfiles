mkdir -p .dev_lookup
cat > .dev_lookup/spp_apikey.py <<'PY'
from ansible.plugins.lookup import LookupBase

DOCUMENTATION = r"""
lookup: spp_apikey
short_description: doc loader smoke test
description:
  - minimal docs as a plain YAML string
options:
  host:
    description: dummy
    type: str
"""

EXAMPLES = r"""
- debug: msg="{{ lookup('spp_apikey', host='x') }}"
"""

RETURN = r"""
_raw:
  description: dummy value
  type: str
"""

class LookupModule(LookupBase):
    def run(self, terms, variables=None, **kwargs):
        return ["ok"]
PY

export ANSIBLE_LOOKUP_PLUGINS="$PWD/.dev_lookup"
ansible-doc -t lookup spp_apikey

